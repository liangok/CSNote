# 前置声明与头文件的本质

## 前置声明

切记前置声明的终极目的，仅仅是为了在不提供内存布局细节的提前下让源文件编译过。为了只影响编译过程不影响链接过程，所以它实际不产生任何占用内存的对象（我们之前提了一些），只作不产生对象的声明。

使用前置声明的好处，多数情况下能减少编译依赖，提升编译速度，具体为何接下来会再做解释。

* 函数

```cpp
int function( int, int );
```

* 变量

```cpp
// int a; 这种是会占用实际内存的，所以这种肯定不行，所以引入新关键字 "extern"
extern int a; // 即为前置声明，它假设某个c/cpp object file有一个int类型的a对象，链接期肯定能找到，所以你用就是了（万一没有呢？）。
```

* 自定义类型
  * struct
  * class

```cpp
struct Type1;
class Type2;
```

## 头文件的本质

### 本质

就是代码文件，与c/cpp文件无异，甚至可以用一个txt文件来代替，只是这么做没有语法高亮而已。

### 一般作用

告诉引用此头文件的c/cpp文件有什么方法或者变量可以使用（即前置声明的作用）可定义什么类型的指针，尽管头文件里也可以定义变量（会产生占用空间的变量实体）但是这么做很容易出现链接错误，所以有好习惯的程序员都不会这么干。

另外除了作前置声明使用，还可以向引用头文件的c/cpp文件提供自定义类型的内存布局（即结构体/类声明），这样才可以使用点语法（因为以之前前的内存管理教程里提过，点语法是以知道对象的内存布局为基础的，因为其实质就是通过偏移量来访问），调用成员方法。

由于作前置声明和提供点语法支持是两种不同的作用，所以头文件也可以以此细分为两类。

* 仅有前置声明
* 含结构体/类声明

